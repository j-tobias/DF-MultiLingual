
# Step 1 - select a Video
# Step 2 - extract Audio from Video

# Step 3 - create Transcript using Whisper
# Step 4 - prompt LLM the Transcript with the instruction to create manipulation instructions

import os
import utils as u
import transcript as t

id = "7DEPS1xWxkM"
url = f"https://www.youtube.com/watch?v={id}"

# path = u.download_video(url)
# u.extract_audio_from_video(f"downloads/{id}.mp4")

# pipeline = u.DiarizationPipeline(os.getenv("HF_BTPW"))
# segments = pipeline.process_audio(
#     f"downloads/{id}.wav",
#     min_speakers=2, 
#     max_speakers=2)



# extractor = u.SegmentExtractor(id, output_dir="segments")
# segment = extractor.extract_segment(
#         video_path=f"downloads/{id}.mp4",
#         audio_path=f"downloads/{id}.wav",
#         start_time=18.0,
#         end_time=101.0,
#         speaker="Boris Pistorius"
#     )

transcriber = t.Transcriber()
# transcript = transcriber.transcribe(f"segments/segments_{id}/audio/segment_18_0_to_101_0_Boris Pistorius.wav")
# print("Transcript: ", transcript["text"])

transcript = transcriber.transcribe(f"downloads/{id}.wav")
print("Transcript: ", transcript["text"])


"""
Guten Abend, Herr Pistorius. Guten Abend, Herr Zamperoni. Die Zahlen des heutigen Deutschland-Trends belegen es noch mal eindrucksvoll. Sie hätten mit Abstand die meiste Zustimmung in der Bevölkerung als Kanzlerkandidat. Sie liegen weit vor Friedrich Merz und noch weiter vor Olaf Scholz. Wie sinnvoll ist es da, dass Sie jetzt zurückziehen? Also erstens ziehe ich nicht zurück, sondern ich erkläre, dass ich nicht zur Verfügung stehe. Das ist, finde ich, erstmal schon mal ein wesentlicher Unterschied. Und ich tue das deshalb, weil ich der festen Überzeugung bin, dass man in den Zeiten, in denen wir gerade leben, einen amtierenden Kanzler der regierungsführenden Partei nicht gewissermaßen ihm die Kraft nimmt, sein Amt auszuführen. Die Welt und Deutschland, wir gucken auf große Probleme und es ist wichtig, dass Deutschland handlungsfähig bleibt. Und das wäre infrage gestellt, wenn wir einen Kanzler auf Abruf hätten. Und gleichzeitig muss ich sehr klar sagen, ich vertraue auf Olaf Scholz. Er hat sich in den dreieinhalb Jahren, in drei Jahren als Kanzler wirklich einen guten Stand gehabt, indem er nämlich eine sehr schwierige Koalition geführt hat. Und bei aller Kritik, die der ein oder andere äußert, wirklich einen guten Stand gehabt, in dem er nämlich eine sehr schwierige Koalition geführt hat. Und bei aller Kritik, die der ein oder andere äußert, glaube ich, wir sind klug beraten, als Partei bei ihm zu bleiben. Und ich füge gerne hinzu, ich habe bei meinem Anzantritt 2023 mehrmals gesagt, dass ich mein Amt als Verteidigungsminister nicht das Karrieresprungbrett verstehe, so wie das einige meiner Vorgängerinnen oder Vorgänger vielleicht getan haben. Ich habe mir das Vertrauen der Truppe erarbeitet. Es gibt noch viel zu tun. Die Truppe ist mir ans Herz gewachsen. Ich will diesen Job weitermachen, weil wir noch nicht fertig sind. Weil die Anforderungen, die die Bedrohungslage an uns stellen, einfach noch nicht erfüllt sind. Das hat für mich Priorität. Sie glauben also, Olaf Scholz hat bessere Chancen als Sie? Ich glaube, dass Olaf Scholz sehr gute Chancen hat, weil die Partei hinter ihm steht. Das tut sie hinter ihrem Kanzler natürlich. Und deswegen bin ich fest davon überzeugt, wir werden ein gutes Ergebnis einfahren. Vorausgesetzt, wir bleiben als Partei geschlossen und hören auf, Debatten zu führen, die niemand hören will. Und deswegen habe ich heute ganz klar auch meinen Beitrag dazu geleistet, diese Debatte zu beenden, damit wir uns auf das konzentrieren können, was in 94 Tagen ansteht, nämlich die Wahl. Aber warum haben Sie das nicht schon längst gemacht, wenn Sie um Einigkeit bemüht sind? Warum haben Sie nicht schon viel früher einen Deckel drauf gemacht und erst heute gesagt, ich stehe da nicht zur Verfügung? Zum einen, weil es gar keine Ansprache an mich gab, außer aus den Medien und aus einzelnen Parteigliederungen. Aber Herr Pistorius, Sie haben doch die Stimmen aus der Partei gehört, die da waren. Das war ja schon vor dem Wochenende und während der Kanzler in Rio unterwegs ist, hätten Sie ja schon sagen. Sie sagen es, der Kanzler war in Rio. Wir hatten uns verabredet, dass wir nach der Rücke aus Rio von Olaf Scholz die Gespräche führen. Ich bin heute in das Gespräch reingegangen und habe gesagt, ich stehe nicht zur Verfügung. Aber Sie haben auch vor wenigen Tagen gesagt, man solle in der Politik nie irgendetwas ausschließen. Das musste doch jeder so verstehen, dass sie eventuell dann auch zur Verfügung stehen würden. Und das hat auch gewisse Hoffnung geweckt an der Parteibasis. Warum haben Sie das dann gesagt, wenn Sie nicht zur Verfügung stehen? Das kann ich so nicht stehen lassen, der Zamperoni. Journalisten fragen gerne, ob man das oder das ausschließen könne oder nicht. Und wenn man dann sagt, ich schließe das ein oder andere aus, ist man genauso gelackmeiert, als wenn man sagt, ich schließe gar nichts aus. Weil am Ende stellen sich die Fragen, die beantwortet werden müssen, dann, wenn sie gestellt werden. Und nicht hypothetisch zu irgendeinem anderen Zeitpunkt. Und wer das Gespräch vom Montagabend ganz gehört hat, und nicht nur diesen Satz, der wird auch gehört haben, dass ich gesagt habe, eine Kanzlerkandidatur findet in meiner Lebensplanung nicht statt und muss nicht sein. Also von daher muss man immer das ganze Bild sehen, um einen kompletten Eindruck zu kriegen. Ja, aber jetzt ist Donnerstagabend und wenn Sie Montag da den Deckel früher drauf gemacht hätten, dann wäre dieser Schaden auch an der Partei und die Zweifel vielleicht auch an der Führungskraft und der Einigkeit dieser Partei gar nicht erst entstanden, diese Risse. Also den Schuh muss ich mir jetzt wirklich nicht anziehen. Ich war zu jedem Zeitpunkt komplett loyal und habe immer gesagt, dass ich zum Bundeskanzler stehe. Wenn andere die Diskussion aufmachen, muss ich aber bestimmen können, wann ich sie zumache. Und die Stimmen an der Basis, die ja lauter wurden in den vergangenen Tagen für Sie, die sind Ihnen dann auch egal? Nein, die sind mir natürlich nicht egal. Aber ich weiß eben auch, ich bin lange genug im politischen Geschäft auf allen drei Ebenen, Kommune, Land und jetzt Bund. Beliebtheitsumfragen, Stimmungsabfragen sind noch lange keine Stimmen an der Wahlurne. Und ich weiß, dass diese SPD hinter ihrem Kandidaten steht. Und das gilt erst recht für den amtierenden Bundeskanzler. In erster Linie haben wir gehört, der Vorstand steht hinter dieser Nominierung von Olaf Scholz erneut als Bundeskanzler. Hat die Partei Ihnen da irgendwelche Versprechungen gemacht und Ihnen gesagt, jetzt musst du das aber mal klar sagen und nicht zurückziehen, wie Sie sagen, aber sollen Sie sich gar nicht erst aufstellen? Was hat die Ihnen versprochen? Herr Zamperoni, Sie unterschätzen mich. Ich bin nicht käuflich und ich habe ein klares Bild von staatspolitischer Verantwortung. Und ich habe es vorhin gesagt, wir brauchen jetzt eine handlungsfähige, starke Regierung mit einem Bundeskanzler, der wahrgenommen werden kann, der sich nicht verstricken muss in parteiinterne Debatten oder mit einem Kanzlerkandidaten. Das ist jetzt das Gebot der Stunde. Deswegen muss man mir nichts anbieten, um zu erklären, wovon ich überzeugt bin. Dann frage ich es mal andersrum. Womit hat die Partei Ihnen dann gedroht, wenn Sie jetzt diesen Schritt nicht gehen, den Sie heute gemacht haben? Es ist erstaunlich, dass in den Debatten, die wir führen, immer wieder gefordert wird, dass es Haltung braucht und Prinzipien und Überzeugungen, wenn man Politik machen will. Wenn man sich dann danach richtet und danach handelt, dann wird es in Frage gestellt nach dem Motto, das kann ja nicht sein, da muss ja entweder eine Drohung oder eine Belohnung im Raum gestanden haben. Ich kann Ihnen versichern, weder das eine noch das andere haben stattgefunden. Hat dann aber vielleicht die Parteispitze das Ganze etwas zu lang laufen lassen? Man hätte das ja auch schon viel früher erklären können. Ja, aber wie viel früher denn? Ich meine, die Koalition ist gerade seit, wann war der Beschluss, wann war die Ankündigung des Endes der Koalition? Vor gut 10 Tagen oder 14 Tagen. Der Bundeskanzler war jetzt in Rio. Sowas bricht man nicht über den Zaun. Jedenfalls geht es jetzt darum, dass diese Gespräche heute geführt worden sind und gestern Abend. Und das ist das Ergebnis. Ich bin so da reingegangen, weil ich davon überzeugt bin. Und die Parteispitze hat hier, finde ich, sich auch nichts vorzuwerfen. So etwas muss man in Ruhe machen und die Gespräche führen, wann sie zu führen sind. Jetzt ist die Entscheidung so gefallen. Sie glauben also, Olaf Scholz wird wieder Bundeskanzler? Ich glaube, dass er sehr gute Chancen hat, Bundeskanzler zu werden. Aber ich wiederhole mich. Nur dann, wenn wir als Partei geschlossen hinter ihm stehen, geschlossen und engagiert Wahlkampf machen und diese Debatten über dieses oder jenes beenden und uns auf den politischen Gegner konzentrieren. Denn das ist jetzt das Gebot der Stunde. Sie sagen es, das wird kein leichter Wahlkampf. Mitten im Winter dazu auch noch. Da braucht es eine Menge Begeisterung auch an der Basis bei den Wahlkämpfern, die dann mitten im Schnee und Regen vielleicht stehen müssen und Menschen überzeugen von der SPD. Glauben Sie, dass da jetzt, nachdem, wie das jetzt so gelaufen ist, diese Begeisterung für eine erfolgreiche Wahl in Ihrer Partei auch da ist? Ja, das tue ich. Sagt der Bundesverteidigungsminister. Herr Pistorius, ich danke Ihnen für das Gespräch. Sehr gerne, Dankeschön.
"""